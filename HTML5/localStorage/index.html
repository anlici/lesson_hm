<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
  <title>LocalStorage</title>
  <style>
  * {
    margin: 0;
    padding: 0;
  }

  html {
  box-sizing: border-box;
  background: url('http://wes.io/hx9M/oh-la-la.jpg') center no-repeat;
  background-size: cover;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  font-family: Futura,"Trebuchet MS",Arial,sans-serif;
}

*, *:before, *:after {
  box-sizing: inherit; 
}

svg {
  fill:white;
  background: rgba(0,0,0,0.1);
  padding: 20px;
  border-radius: 50%;
  width: 200px;
  margin-bottom: 50px;
}

.wrapper {
  padding: 20px;
  max-width: 350px;
  background: rgba(255,255,255,0.95);
  box-shadow: 0 0 0 10px rgba(0,0,0,0.1);
}

h2 {
  text-align: center;
  margin: 0;
  font-weight: 200;
}

.plates {
  margin: 0;
  padding: 0;
  text-align: left;
  list-style: none;
}

.plates li {
  border-bottom: 1px solid rgba(0,0,0,0.2);
  padding: 10px 0;
  font-weight: 100;
  display: flex;
}

.plates label {
  flex: 1;
  cursor: pointer;
}

.plates input {
  display: none;
}

.plates input + label:before {
  content: 'â¬œ';
  margin-right: 10px;
}

.plates input:checked + label:before {
  content: 'ğŸŒ®';
}

.add-items {
  margin-top: 20px;
}

.add-items input {
  padding: 10px;
  outline: 0;
  border: 1px solid rgba(0,0,0,0.1);
}
  </style>
</head>
<body>
<div class="wrapper">
  <h2>LOCAL TAPAS</h2>
  <p></p>
  <ul class="plates">
    <li>Loading Taps...sad</li>
  </ul>
  <form class="add-items">
    <input type="text" name="item" placeholder="Item Name" 
      required>
    <input type="submit" value="+ Add Item">
  </form>
  <script>
    const addItems = document.querySelector('.add-items'); // form
    const itemsList = document.querySelector('.plates'); // ul
    // è·å– ï¼Œå–å‡ºè½¬æˆæ•°ç»„ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰æ•°æ®
    const items = JSON.parse(localStorage.getItem("items"))||[];
    function addItem(e) {
        e.preventDefault(); // é˜»æ­¢é»˜è®¤æäº¤
        console.log(this,e.target); // this äº‹ä»¶å‘ç”Ÿå…ƒç´ ï¼Œæ˜¯form,e.targetæ˜¯submit
        // å±æ€§é€‰æ‹©å™¨ï¼Œä¸ºå•¥ç”¨å±æ€§é€‰æ‹©å™¨ï¼Œå› ä¸ºnameå±æ€§æ˜¯åŠ¨æ€çš„
        const text = (this.querySelector("[name=item]")).value.trim(); // è·å–è¡¨å•çš„valueå€¼
        // æ•°æ® JSONå¯¹è±¡
        const item = {
            text, // ç®€å†™ ç›¸å½“äº text:textï¼Œes6
            done: false
        }
        items.push(item);
        populateList(items,itemsList);
        localStorage.setItem('items',JSON.stringify(items));// å­˜å‚¨æ•°æ®
        this.reset(); // é‡ç½®è¡¨å•
    }
    // æ¸²æŸ“æ•°æ®,æ¯”è¾ƒå¥½ç»´æŠ¤ï¼Œè€¦åˆæ€§ä½ï¼Œå¯å¤ç”¨
    function populateList(platesList,itemsList) {
        // liå­—ç¬¦ä¸²
        itemsList.innerHTML = platesList.map((palte,i) => {
            // data-index æ•°æ®å±æ€§
            return `
            <li>
                <input type="checkbox" 
                        data-index=&{i} 
                        id="item${i}"
                        ${palte.done ? 'checked' : ''}
                />
                <label for="item${i}">${palte.text}</label>
            </li>   
            `
        }
        ).join(''); // æ”¹ â€œï¼Œâ€ ä¸º <br>
    }
    addItems.addEventListener('submit',addItem) // å‡½æ•°å¼•ç”¨æŒ‡å‘åœ°å€
    populateList(items,itemsList); // items æ•°æ®æ¸²æŸ“åˆ°é¡µé¢
  </script>
</div>
</body>
</html>