## 在多环境支持中，基于域名识别实现环境自动切换，具体是怎么通过域名识别来做环境切换的，有哪些关键的判断逻辑和处理步骤？
- 维护一个域名与环境的映射关系
- 监听请求的域名，匹配到对应环境标识后，修改url 到基础地址，然后继续拼接后url 后切换环境
- 根据域名判断当前环境


## 基于 Cursor IDE 构建智能测试规则引擎，配置化规则自动生成测试用例，这些配置化规则是如何设计的，要考虑哪些测试场景和需求来保证生成用例的有效性？
- 先梳理了项目常见的输入输出场景，像参数必填、参数类型、边界值等情况。然后设计规则时，把这些场景抽象成配置项，比如对于参数校验，配置required: true就生成必填校验的测试用例，配置type: number且range: [0,100]就生成数值类型和边界值测试用例 。主要考虑正常流程、异常参数、边界情况这些测试场景，保证覆盖核心功能和易错点。

## 数据缓存
- 异常处理兜底：使用 try-catch 捕获 JSON 解析异常，解析失败时返回空数组而不是崩溃
- 应用隔离兜底：按 rootAppId 隔离不同应用的缓存，避免数据冲突
- 【数据完整性兜底：使用深拷贝避免引用问题，过滤空值和无效数据】
- 容量控制兜底：限制最大缓存数量为5个，防止内存溢出
- （UI 渲染兜底：在渲染时检查数据有效性，只显示有名称的菜单项）

- rootAppId 的设置时机：
应用启动时，通过 API 请求获取当前应用的 appId
调用 setRootAppId(res.appId) 设置到全局变量
- 

## 访问菜单时的完整流程：
- 应用启动时：通过 API 获取完整的菜单树数据
- 用户点击菜单时：
    保存到最近访问缓存（localStorage）
    根据菜单类型进行不同处理（外部链接/内部路由）
    使用 history API 进行路由跳转
- 路由变化时：
    根据当前路径匹配菜单节点
    更新选中状态和展开状态
- 内容加载：
    计算 iframe 的 src 地址
    加载对应的子应用页面
所以回答你的问题：
- 访问菜单不会重新请求菜单数据：菜单数据在应用启动时已经获取并缓存
- 主要是渲染和路由处理：点击菜单主要是更新状态、路由跳转和重新渲染
