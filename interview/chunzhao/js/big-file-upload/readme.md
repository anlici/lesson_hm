## 大文件上传
- 问题：
  - 耗时 一个tcp ip 超时上传中断
  - 服务器对请求大小或上传时间有限制
- 压缩：zip gzip
  - 减少传输数据量，压缩减少体积，减少长传时间和宽带消耗
  - 网络传输更稳定
  - 节省服务器占用存储空间

- http 大文件 普通上传 1个http 连接 1.0 单个连接明文传输协议，网络中断或波动，整个文件
  分片 http 2.0 多路复用 二进制流式上传（流id 每个文件作为一个流），重新上传某个文件
  n / p，p为片数
- 单连接 受到网络波动影响，断点续传
  多连接，分片数量大，管理难度大，断点续传
- 用户体验
  - 进度条 暂停 断点续传
- e.target.files 包含文件对象数组，可以拿到文件在操作系统存储是头部信息
- **切片大小设定：**
  1-5mb 2mb常用 可以动态微调大小
  服务器并发数限制，控制并发数，控制文件上传速度
  promise.all 并发请求
  平衡网络和多路复用上限
  - **限流上传**，使用promise.all 配合一个固定大小并发池来控制同时上传分片数量
    - 固定并发池，从分片队列取出若干分片进行上传，完成后再上传剩余；如果任务数量达到限制，使用promise.race 来等待某一个分片上传完成，再继续取分片上传；
    - 利用 Promise.all 等待当前并发池中的所有任务完成后再继续处理剩余分片
- 切片是什么？
  - Blod 二进制对象 
  - 文件不同，头信息不同，文件展示不同
  - 文件对象基于Blod 原型创建，继承上面slice 方法，根据偏移量 截取文件片段
  - <input type="file" name="文件" id="input"  />
    <button id="upload" type="button">上传</button>

- multiple 多个文件
- 全栈模拟，理解深度
  - 前端
    - 进度条
    - 
  - 后端
    - 

- 多路复用
  
- 服务器推送

- 二进制分帧