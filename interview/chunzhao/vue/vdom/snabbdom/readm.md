## 虚拟dom 作用
- 虚拟dom js 对象，有type 标签，props ，children 等属性
- 通过在**内存中表示dom结构**，减少直接操作真实dom次数，从而优化渲染效率和用户体验
- 允许**快速比较和更新界面**，提升响应性能。
- 虚拟dom 对象和真实dom对象一一对应，方便操作
- 虚拟允许多次状态更新合并为一次dom更新，减少频繁的dom操作，提升性能（比对，渲染，更新）
- 基于使用snabbdomjs 实现，基于h 函数，接收参数，返回虚拟dom
  - patch 函数：接收新旧虚拟dom，返回diff结果,更新到容器中

- spa 单页面应用
- diff 算法：比较新旧虚拟dom，找出差异，更新真实dom
  同层比较，key 属性优化（快速判断节点是否可以复用）、最小化更新


## npm cnpm pnpm 
- pnpm :全局 软链接
- cnpm :国内镜像，或者特别使用国内淘宝等镜像
- npx ： 临时下载并运行

## 302 和 304 状态码
- 302 临时重定向，临时跳转，301 永久重定向（一律get）
  307 临时重定向 308 永久重定向（保持请求方法）
- 301 move permanently ; 302 Found ; 307 temporary redirect ; 308 permanent redirect

- 304 协商缓存，304 状态码，服务器告诉客户端，这个资源没有更新，直接使用缓存

- 强缓存，max-age 缓存时间，时间是相对的（从响应时间开始计算）
  expires 绝对时间，优先级比coche-control:max-age低
- 1，服务器首次响应，last-modified响应头返回资源最后修改时间,
  客户端再次请求，通过if-modified-since请求头携带上传last-modified时间；
  服务器对比时间，如果时间相同，返回304，304状态码，客户端使用缓存；
  （内容不变但是时间变化，导致不必要的更新）
- 2，etag 响应头返回资源唯一标识符，一般是hash值，客户端再次请求，通过if-none-match请求头携带上传etag；
  服务器对比etag，如果相同，返回304，304状态码，客户端使用缓存；
  （精确到文件内容，减少时间戳局部性；适用分布式服务器环境；计算etag可能造成开销）

- 强缓存自己使用缓存，不请求；协商 304 一次请求
- 静态资源，设置较长的max-age，通过版本号或哈希值更新资源路径避免缓存问题；
- 动态资源（如 API 数据）适合使用协商缓存，确保客户端获取最新数据。
    分布式系统中，使用 ETag 可以保证一致性。
- 服务器分布式，使用etag ，客户端带上if-none-match，服务器返回304

## 分类
- 1xx 信息响应
  - 101 switch protocol
- 2xx 成功响应
  - 200 ok
  - 201 created   相对post 创建
  - 202 accepted  暂不处理，异步处理
  - 204 no content 请求成功，无内容
- 4xx 客户端错误
  - 400 bad request 错误请求
  - 401 unauthorized 未授权
  - 403 forbidden 禁止访问
  - 404 not found 资源不存在
  - 405 method not allowed 方法不允许
- 5xx 服务器错误

## 跨站脚本注入（XXS） 跨站请求伪造（CSRF） 
- 跨站脚本注入：攻击者通过在网页中插入恶意脚本来窃取用户信息，如cookie、session等。 
  1，DOM XSS：DOM 漏洞，通过DOM操作，攻击者可以插入恶意脚本，导致攻击者可以控制网页。
  假设评论系统，用户可以在网页发表评论，评论内容中包含恶意脚本，攻击者可以插入恶意脚本，导致攻击者可以控制网页。
  - 窃取用户信息：cookie
  - 重定向恶意网站
  - 串改网页内容，钓鱼攻击
- 解决
  - 用户输入进行严格验证和过滤
  - html 转义 < > & &lgt; &gt; &lt; &amp;
  - **sanitize-html 允许标签和允许属性列表，过滤掉非法标签和属性**

- csrf：攻击者通过在网页中插入恶意链接，让用户点击链接，从而触发恶意请求。
  - 攻击者诱导用户早已经认证的会话中，执行未授权操作，利用用户身份进行恶意请求。可以插入恶意链接，导致攻击者可以控制网页。
  - 解决：
    - 假设用户登入银行网站，并且运行用户发送post请求来转账，
    - 过程
      - csrf token 敏感操作，验证csrf token 
      - 关键cookie 设置**sameSite** ，同一个域名，strict 严格模式，none 不限制，lax 默认，
 